# Regla de Handovers Optimizados

**Fecha de creaci√≥n:** 22 de Enero 2026  
**Versi√≥n:** 1.0.0  
**Prop√≥sito:** Estandarizar formato de handovers con REF para citaci√≥n posterior

---

## üìã Formato Est√°ndar de Handover

### 1. Encabezado Obligatorio

```markdown
# Handover - [T√≠tulo Descriptivo] [YYYY-MM-DD]

**REF**: `HANDOVER-YYYY-MM-DD-SLUG`  
**Fecha**: DD de Mes YYYY  
**Contexto**: [1-2 l√≠neas de contexto]
```

**Reglas del REF:**
- Formato: `HANDOVER-YYYY-MM-DD-SLUG`
- SLUG: 2-4 palabras clave en MAY√öSCULAS separadas por guiones
- Ejemplos:
  - `HANDOVER-2026-01-22-DOC-AUDIT`
  - `HANDOVER-2026-01-15-RLS-MIGRATION`
  - `HANDOVER-2026-01-10-VAPI-INTEGRATION`

### 2. Estructura Obligatoria

```markdown
## üéØ Objetivo Cumplido
[1 p√°rrafo resumiendo qu√© se logr√≥]

## ‚úÖ Tareas Completadas
[Lista con checkboxes de lo completado]

## üìä M√©tricas/Resultados (si aplica)
[Tabla o bullets con n√∫meros concretos]

## üéØ Pr√≥ximos Pasos Cr√≠ticos (si aplica)
[Solo 2-3 pasos m√°s importantes]

## üìÇ Archivos Clave Creados/Modificados
[Lista concisa de archivos tocados]

## üìö Documentos de Referencia (si aplica)
[Links a docs relacionados]

## ‚ö†Ô∏è Notas Importantes (si aplica)
[Advertencias o consideraciones especiales]

---

**Estado Final**: [Emoji + resumen de 1 l√≠nea]  
**Para citar en otro chat**: `REF: HANDOVER-YYYY-MM-DD-SLUG`
```

---

## üéØ Optimizaci√≥n de Tokens

### Qu√© INCLUIR en el Chat

Al finalizar una sesi√≥n, el agent debe imprimir en el chat:

```markdown
‚úÖ Handover creado

**REF**: `HANDOVER-YYYY-MM-DD-SLUG`  
**Ubicaci√≥n**: `.cursor/handovers/YYYY-MM-DD-descripcion.md`

Para citar en otro chat:
"Contin√∫o desde REF: HANDOVER-YYYY-MM-DD-SLUG"

**Resumen r√°pido** (2-3 l√≠neas):
- [Tarea completada 1]
- [Tarea completada 2]
- Pr√≥ximo: [acci√≥n inmediata]
```

### Qu√© NO INCLUIR en el Chat

‚ùå **NO repetir** el contenido completo del handover en el chat  
‚ùå **NO enumerar** todos los archivos modificados  
‚ùå **NO explicar** cada cambio en detalle  
‚ùå **NO copiar** secciones completas del handover

**Raz√≥n**: El handover YA est√° guardado en `.cursor/handovers/`. El chat solo necesita el REF para citarlo despu√©s.

---

## üìù Ejemplos de Uso

### Ejemplo 1: Finalizar Sesi√≥n

**Agent imprime en chat:**

```
‚úÖ Handover creado

**REF**: `HANDOVER-2026-01-22-DOC-AUDIT`  
**Ubicaci√≥n**: `.cursor/handovers/2026-01-22-auditoria-documentacion-final.md`

Para citar en otro chat:
"Contin√∫o desde REF: HANDOVER-2026-01-22-DOC-AUDIT"

**Resumen r√°pido**:
- ‚úÖ Auditor√≠a completa de 527 archivos .md
- ‚úÖ Validaci√≥n BD y c√≥digo frontend
- ‚úÖ Creado glosario + regla de mantenimiento
- Pr√≥ximo: Limpieza de 32 grupos de duplicados
```

### Ejemplo 2: Citar Handover en Nuevo Chat

**Usuario en nuevo chat:**

```
Contin√∫o desde REF: HANDOVER-2026-01-22-DOC-AUDIT

Quiero ejecutar la limpieza de duplicados que qued√≥ pendiente.
```

**Agent busca el handover:**

```bash
# Busca en .cursor/handovers/ el archivo con REF: HANDOVER-2026-01-22-DOC-AUDIT
# Lee la secci√≥n "Pr√≥ximos Pasos Cr√≠ticos"
# Contin√∫a desde ah√≠
```

---

## üîç Comandos para el Agent

### Cuando el usuario dice "handover":

```typescript
// 1. Crear archivo en .cursor/handovers/YYYY-MM-DD-slug.md
// 2. Usar estructura est√°ndar con REF
// 3. Imprimir en chat SOLO:
//    - REF
//    - Ubicaci√≥n del archivo
//    - Resumen de 2-3 l√≠neas
//    - Pr√≥ximo paso inmediato
```

### Cuando el usuario cita un REF:

```typescript
// 1. Buscar en .cursor/handovers/ el archivo que contiene ese REF
// 2. Leer la secci√≥n "Pr√≥ximos Pasos Cr√≠ticos"
// 3. Continuar desde ah√≠
// 4. NO repetir todo el handover en el chat
```

---

## üìÇ Convenciones de Nombres de Archivo

### Formato: `YYYY-MM-DD-slug-descriptivo.md`

**Ejemplos:**
- `2026-01-22-auditoria-documentacion-final.md`
- `2026-01-15-rls-migration-completada.md`
- `2026-01-10-vapi-integration-finished.md`

**Reglas:**
- Fecha en formato ISO (YYYY-MM-DD)
- Slug en min√∫sculas con guiones
- Sufijo descriptivo del estado (final, completada, wip, etc.)

---

## üéØ Beneficios

| Antes | Despu√©s |
|-------|---------|
| Agent repite todo el handover en chat | Agent imprime solo REF + resumen |
| 500-1000 tokens por handover en chat | 50-100 tokens en chat |
| Dif√≠cil de citar despu√©s | Citar con `REF: HANDOVER-...` |
| Handovers perdidos en chat | Handovers en `.cursor/handovers/` |

**Ahorro estimado**: 80-90% de tokens por handover

---

## ‚ö†Ô∏è Reglas Cr√≠ticas

1. **SIEMPRE** incluir REF en encabezado del handover
2. **SIEMPRE** imprimir REF en el chat (no todo el contenido)
3. **NUNCA** repetir el handover completo en el chat
4. **SIEMPRE** usar formato estandarizado de REF
5. **SIEMPRE** incluir "Para citar en otro chat" al final

---

## üìö Archivos Relacionados

- **Template completo**: `.cursor/templates/session-handover.md`
- **Template checkpoint**: `.cursor/templates/checkpoint.md`
- **Carpeta de handovers**: `.cursor/handovers/`

---

## üìÖ Mantenimiento

- Revisar `.cursor/handovers/` mensualmente
- Archivar handovers >3 meses en `.cursor/handovers/archive/`
- Actualizar esta regla si se detectan mejoras

---

**√öltima actualizaci√≥n:** 22 de Enero 2026  
**Pr√≥xima revisi√≥n:** 22 de Febrero 2026
