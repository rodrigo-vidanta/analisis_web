---
alwaysApply: true
---

# Reglas de Mantenimiento de Documentaci√≥n

**Fecha de creaci√≥n:** 22 de Enero 2026  
**Versi√≥n:** 1.0.0  
**Estado:** Activo

---

## üìã Prop√≥sito

Estas reglas garantizan que la documentaci√≥n se mantenga actualizada, organizada y f√°cil de navegar. Son **obligatorias** para todos los agents que modifiquen documentaci√≥n.

---

## üìù Al Crear Nuevo Documento

### 1. Agregar √çndice (si >200 l√≠neas)

```markdown
## üìã √çndice

1. [Secci√≥n 1](#secci√≥n-1)
2. [Secci√≥n 2](#secci√≥n-2)
3. [Ver Tambi√©n](#ver-tambi√©n)
```

**Ejemplo:** Ver `docs/NUEVA_ARQUITECTURA_BD_UNIFICADA.md`

### 2. Incluir Secci√≥n "Ver Tambi√©n"

```markdown
## üìö Ver Tambi√©n

### Documentaci√≥n Relacionada
- [Doc Relacionado 1](DOC1.md) - Descripci√≥n breve
- [Doc Relacionado 2](DOC2.md) - Descripci√≥n breve

### Gu√≠as de Uso
- [Gu√≠a 1](GUIA1.md)
```

**Reglas de referencias:**
- Docs de arquitectura ‚Üí Referencia a security y migraciones
- Docs de seguridad ‚Üí Referencia a arquitectura BD y Edge Functions
- Docs de MCPs ‚Üí Referencia a arquitectura BD y tablas
- Docs de migraciones ‚Üí Referencia a arquitectura antes/despu√©s

### 3. Agregar Entrada en docs/INDEX.md

Ubicar la secci√≥n apropiada y agregar link con descripci√≥n:

```markdown
### Secci√≥n Apropiada
- [NUEVO_DOCUMENTO.md](NUEVO_DOCUMENTO.md) - Descripci√≥n breve
```

### 4. Actualizar CHANGELOG.md

```markdown
## vX.Y.Z - YYYY-MM-DD

### üìö Documentaci√≥n
- ‚úÖ Creado NUEVO_DOCUMENTO.md - [descripci√≥n]
```

---

## ‚úèÔ∏è Al Modificar Documento Existente

### 1. Actualizar Fecha "√öltima actualizaci√≥n"

```markdown
**√öltima actualizaci√≥n:** 22 de Enero 2026
```

### 2. Si Cambia Estructura, Actualizar √çndice

Si agregas/eliminas secciones principales, actualiza el √≠ndice del documento.

### 3. Verificar Links Internos

Despu√©s de modificar, verifica que todos los links internos sigan v√°lidos:

```bash
# Buscar links rotos (manual)
grep -r "\[.*\](.*\.md)" docs/ | grep "ARCHIVO_MODIFICADO"
```

### 4. Actualizar Referencias Cruzadas

Si el cambio afecta informaci√≥n referenciada en otros docs, actualiza esas referencias.

---

## üóëÔ∏è Al Eliminar Documento

### 1. Remover de docs/INDEX.md

Busca y elimina la entrada del documento en INDEX.md.

### 2. Buscar Referencias en Otros Docs

```bash
# Buscar referencias al documento
grep -r "DOCUMENTO_A_ELIMINAR.md" docs/
grep -r "DOCUMENTO_A_ELIMINAR.md" .cursor/rules/
```

### 3. Actualizar Links Rotos

Reemplaza links rotos por:
- Link al documento que lo reemplaza (si aplica)
- Eliminar el link si ya no es relevante
- Agregar nota de deprecaci√≥n si es temporal

### 4. Documentar en CHANGELOG.md

```markdown
## vX.Y.Z - YYYY-MM-DD

### üìö Documentaci√≥n
- ‚ùå Eliminado DOCUMENTO.md - Raz√≥n: [deprecado/consolidado/obsoleto]
```

---

## üîç Validaci√≥n Mensual

### Scripts de Auditor√≠a

```bash
# 1. Ejecutar auditor√≠a de documentaci√≥n
npx tsx scripts/audit-documentation.ts

# 2. Revisar reporte
cat AUDIT_REPORT.md

# 3. Ver inventario JSON (conteo de archivos)
cat AUDIT_INVENTORY.json | jq '.files | length'
```

### Checklist de Validaci√≥n

- [ ] Ejecutar `scripts/audit-documentation.ts`
- [ ] Verificar duplicados con MD5 (no debe haber)
- [ ] Validar que `docs/INDEX.md` est√© completo
- [ ] Revisar fechas de "√öltima actualizaci√≥n"
- [ ] Buscar links rotos (grep "docs/.*\.md")
- [ ] Verificar que glosario tenga t√©rminos actuales

---

## üìÇ Estructura de Directorios

### Directorio Principal: docs/

**Estructura plana** (NO crear subdirectorios innecesarios)

```
docs/
‚îú‚îÄ‚îÄ INDEX.md                          # Punto de entrada
‚îú‚îÄ‚îÄ GLOSARIO.md                       # T√©rminos t√©cnicos
‚îú‚îÄ‚îÄ NUEVA_ARQUITECTURA_BD_UNIFICADA.md
‚îú‚îÄ‚îÄ ARQUITECTURA_SEGURIDAD_2026.md
‚îú‚îÄ‚îÄ MIGRACION_SYSTEM_UI_A_PQNC_AI_COMPLETA.md
‚îú‚îÄ‚îÄ EDGE_FUNCTIONS_CATALOG.md
‚îî‚îÄ‚îÄ [otros documentos...]
```

**Razones:**
- ‚úÖ B√∫squeda m√°s r√°pida (sin jerarqu√≠as)
- ‚úÖ Links m√°s simples (no "../../../")
- ‚úÖ Indexaci√≥n de Cursor m√°s eficiente
- ‚úÖ Navegaci√≥n via INDEX.md (no por carpetas)

### Excepciones (Subdirectorios Permitidos)

```
docs/
‚îú‚îÄ‚îÄ sql/              # Scripts SQL espec√≠ficos
‚îî‚îÄ‚îÄ [documentos principales en ra√≠z]
```

---

## üéØ Nombres de Archivos

### Convenciones

| Tipo | Formato | Ejemplo |
|------|---------|---------|
| Arquitectura | `ARQUITECTURA_*.md` | `ARQUITECTURA_SEGURIDAD_2026.md` |
| Migraci√≥n | `MIGRACION_*.md` | `MIGRACION_SYSTEM_UI_A_PQNC_AI_COMPLETA.md` |
| Gu√≠a | `GUIA_*.md` | `GUIA_CONEXION_BASES_DATOS.md` |
| Reporte | `REPORTE_*.md` o `PENTESTING_*.md` | `REPORTE_OPTIMIZACIONES_BD_UNIFICADA.md` |
| Plan | `PLAN_*.md` | `PLAN_OPTIMIZACIONES_JOINS.md` |
| Cat√°logo | `*_CATALOG.md` | `EDGE_FUNCTIONS_CATALOG.md`, `MCP_CATALOG.md` |

**Reglas:**
- Usar UPPERCASE con underscores
- Ser descriptivo pero conciso
- Incluir fecha si es reporte temporal (PENTESTING_2026-01-18.md)

---

## üîó Enlaces y Referencias

### Formato de Links

```markdown
<!-- ‚úÖ CORRECTO - Path relativo desde docs/ -->
[Arquitectura BD](NUEVA_ARQUITECTURA_BD_UNIFICADA.md)

<!-- ‚úÖ CORRECTO - Path relativo a .cursor/rules desde docs/ -->
[Reglas de Seguridad](.cursor/rules/security-rules.mdc)

<!-- ‚ùå INCORRECTO - Path absoluto -->
[Arquitectura BD](/docs/NUEVA_ARQUITECTURA_BD_UNIFICADA.md)

<!-- ‚ùå INCORRECTO - Path con ../.. complejo -->
[Reglas](../../.cursor/rules/security-rules.mdc)
```

### Verificar Links

Despu√©s de crear/modificar, verificar links:

```bash
# Desde ra√≠z del proyecto
grep -r "\[.*\](.*\.md)" docs/NUEVO_DOC.md
```

---

## üìä M√©tricas de Calidad

### Indicadores Saludables

| M√©trica | Objetivo | Estado Actual (2026-01-22) |
|---------|----------|----------------------------|
| Archivos .md en docs/ | ~130-150 | ‚úÖ 138 |
| Duplicados | 0 | ‚úÖ 0 (limpieza 2026-01-22) |
| Docs con √≠ndice (>200 l√≠neas) | 100% | ‚úÖ ~95% |
| Docs con "Ver Tambi√©n" | 80% | ‚ö†Ô∏è 60% (en mejora) |
| Links rotos | 0 | ‚úÖ 0 |

### Se√±ales de Alerta

‚ö†Ô∏è **Requiere acci√≥n si:**
- M√°s de 5 duplicados detectados por MD5
- M√°s de 200 archivos .md (posible acumulaci√≥n)
- Fechas de actualizaci√≥n >6 meses en docs cr√≠ticos
- INDEX.md desactualizado (faltan >10 archivos)

---

## üõ†Ô∏è Herramientas Disponibles

### Scripts de Mantenimiento

| Script | Prop√≥sito | Uso |
|--------|-----------|-----|
| `scripts/audit-documentation.ts` | Auditor√≠a automatizada | `npx tsx scripts/audit-documentation.ts` |
| `scripts/clean-documentation.ts` | Limpieza segura | `npx tsx scripts/clean-documentation.ts --dry-run` |

**Archivos generados:**
- `AUDIT_REPORT.md` - Reporte legible
- `AUDIT_INVENTORY.json` - Inventario en JSON
- `CLEANUP_REPORT.md` - Log de limpieza

---

## üìö Documentos de Referencia

### Para Entender Esta Rule

- [Handover de Limpieza](.cursor/handovers/2026-01-22-auditoria-limpieza-final.md) - Contexto de limpieza
- [INDEX.md](docs/INDEX.md) - Estructura actual
- [AUDIT_REPORT.md](AUDIT_REPORT.md) - √öltima auditor√≠a
- [GLOSARIO.md](docs/GLOSARIO.md) - T√©rminos a mantener actualizados

---

## ‚ö†Ô∏è Reglas Cr√≠ticas (NUNCA Violar)

1. **NUNCA** eliminar archivos sin buscar referencias primero
2. **NUNCA** crear subdirectorios en docs/ sin justificaci√≥n
3. **SIEMPRE** actualizar INDEX.md cuando agregas/eliminas docs
4. **SIEMPRE** agregar √≠ndice a docs >200 l√≠neas
5. **SIEMPRE** incluir secci√≥n "Ver Tambi√©n" con links relevantes

---

**√öltima actualizaci√≥n:** 22 de Enero 2026  
**Revisi√≥n:** Auditor√≠a de Documentaci√≥n
