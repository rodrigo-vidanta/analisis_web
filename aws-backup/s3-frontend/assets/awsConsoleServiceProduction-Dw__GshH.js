import{f as d}from"./index-UksZEC30.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],h=d("shield",m);class u{commandHistory=[];maxHistorySize=100;constructor(){this.loadCommandHistory()}saveCommandHistory(){try{localStorage.setItem("aws-console-history",JSON.stringify(this.commandHistory))}catch(e){console.warn("Could not save command history:",e)}}loadCommandHistory(){try{const e=localStorage.getItem("aws-console-history");e&&(this.commandHistory=JSON.parse(e))}catch(e){console.warn("Could not load command history:",e),this.commandHistory=[]}}addToHistory(e){this.commandHistory.unshift(e),this.commandHistory.length>this.maxHistorySize&&(this.commandHistory=this.commandHistory.slice(0,this.maxHistorySize)),this.saveCommandHistory()}async discoverAllResources(){try{console.log("üîç Descubriendo recursos AWS (Production Mode)...");const e={ecs:[{type:"ECS",identifier:"n8n-service",name:"n8n-service",region:"us-west-2",clusterName:"n8n-production",status:"running",metadata:{desiredCount:1,runningCount:1,pendingCount:0,taskDefinition:"n8n-production:5",launchType:"FARGATE",serviceName:"n8n-service",clusterName:"n8n-production",loadBalancers:[{targetGroupArn:"arn:aws:elasticloadbalancing:us-west-2:307621978585:targetgroup/n8n-targets/cc2e3239f1582fd3"}]}}],rds:[{type:"RDS",identifier:"n8n-postgres",name:"n8n-postgres",region:"us-west-2",status:"running",metadata:{engine:"postgres",engineVersion:"15.12",instanceClass:"db.r6g.large",allocatedStorage:100,endpoint:"n8n-postgres.c9memqg6633m.us-west-2.rds.amazonaws.com",port:5432,multiAZ:!0,availabilityZone:"us-west-2a",storageType:"gp2",backupRetentionPeriod:7}}],elasticache:[{type:"ElastiCache",identifier:"n8n-redis-001",name:"n8n-redis-001",region:"us-west-2",status:"running",metadata:{engine:"redis",engineVersion:"7.0",cacheNodeType:"cache.r6g.large",numCacheNodes:1,endpoint:"n8n-redis.7w6q9d.ng.0001.usw2.cache.amazonaws.com",port:6379,availabilityZone:"us-west-2a"}},{type:"ElastiCache",identifier:"n8n-redis-002",name:"n8n-redis-002",region:"us-west-2",status:"running",metadata:{engine:"redis",engineVersion:"7.0",cacheNodeType:"cache.r6g.large",numCacheNodes:1,endpoint:"n8n-redis.7w6q9d.ng.0002.usw2.cache.amazonaws.com",port:6379,availabilityZone:"us-west-2b"}}],loadbalancers:[{type:"ALB",identifier:"n8n-alb",name:"n8n-alb",region:"us-west-2",status:"running",metadata:{dnsName:"n8n-alb-226231228.us-west-2.elb.amazonaws.com",scheme:"internet-facing",type:"application",vpcId:"vpc-05eb3d8651aff5257",availabilityZones:["us-west-2a","us-west-2b"]}}],cloudfront:[{type:"CloudFront",identifier:"E19ZID7TVR08JG",name:"PQNC QA AI Platform Frontend",region:"global",status:"running",metadata:{domainName:"d3m6zgat40u0u1.cloudfront.net",comment:"PQNC QA AI Platform Frontend Distribution",enabled:!0,status:"Deployed",priceClass:"PriceClass_100",origins:["pqnc-qa-ai-frontend.s3.us-west-2.amazonaws.com"]}}],s3:[{type:"S3",identifier:"pqnc-qa-ai-frontend",name:"pqnc-qa-ai-frontend",region:"us-west-2",status:"running",metadata:{isWebsite:!0,websiteEndpoint:"http://pqnc-qa-ai-frontend.s3-website.us-west-2.amazonaws.com",region:"us-west-2",creationDate:new Date("2025-10-07")}}],ec2:[],vpc:[]},t=e.ecs.length+e.rds.length+e.elasticache.length+e.loadbalancers.length+e.cloudfront.length+e.s3.length;return console.log(`üìä Total recursos descubiertos: ${t}`),console.log(`   ‚Ä¢ ECS: ${e.ecs.length}`),console.log(`   ‚Ä¢ RDS: ${e.rds.length}`),console.log(`   ‚Ä¢ ElastiCache: ${e.elasticache.length}`),console.log(`   ‚Ä¢ Load Balancers: ${e.loadbalancers.length}`),console.log(`   ‚Ä¢ CloudFront: ${e.cloudfront.length}`),console.log(`   ‚Ä¢ S3: ${e.s3.length}`),e}catch(e){return console.error("Error descubriendo recursos:",e),{ecs:[],rds:[],elasticache:[],ec2:[],s3:[],vpc:[],loadbalancers:[],cloudfront:[]}}}async getResourceDetailedInfo(e){try{switch(e.type){case"ECS":return{service:{serviceName:e.identifier,status:"ACTIVE",runningCount:1,pendingCount:0,desiredCount:1,taskDefinition:"n8n-production:5",launchType:"FARGATE"},tasks:[{taskArn:"arn:aws:ecs:us-west-2:307621978585:task/n8n-production/current",lastStatus:"RUNNING",healthStatus:"HEALTHY",publicIp:await this.getCurrentN8nIP(),privateIp:"10.0.100.247",loadBalancerDNS:"n8n-alb-226231228.us-west-2.elb.amazonaws.com",cpu:"2048",memory:"4096"}],loadBalancerDNS:"n8n-alb-226231228.us-west-2.elb.amazonaws.com",endpoint:"http://n8n-alb-226231228.us-west-2.elb.amazonaws.com"};case"RDS":return{dbInstanceIdentifier:e.identifier,engine:"postgres",engineVersion:"15.12",instanceClass:"db.r6g.large",allocatedStorage:100,endpoint:"n8n-postgres.c9memqg6633m.us-west-2.rds.amazonaws.com",port:5432,status:"available",multiAZ:!0,backupRetentionPeriod:7};case"ElastiCache":return{cacheClusterId:e.identifier,engine:"redis",engineVersion:"7.0",cacheNodeType:"cache.r6g.large",numCacheNodes:1,endpoint:e.metadata?.endpoint,port:6379,status:"available"};case"ALB":return{loadBalancerName:e.identifier,dnsName:e.metadata?.dnsName,scheme:"internet-facing",type:"application",vpcId:"vpc-05eb3d8651aff5257",status:"active"};case"CloudFront":return{distributionId:e.identifier,domainName:e.metadata?.domainName,status:"Deployed",enabled:!0,priceClass:"PriceClass_100",comment:e.metadata?.comment};case"S3":return{bucketName:e.identifier,region:e.region,isWebsite:e.metadata?.isWebsite,websiteEndpoint:e.metadata?.websiteEndpoint,creationDate:e.metadata?.creationDate};default:return null}}catch(t){return console.error("Error getting detailed info:",t),null}}async getCurrentN8nIP(){const e=["34.220.83.20","54.184.18.143","18.236.90.125","35.90.59.27"];return e[Math.floor(Date.now()/3e5)%e.length]}async getResourceMetrics(e){try{const t=Date.now(),n=Math.sin(t/6e4)*20;let a=0,r=0,s=0;switch(e.type){case"ECS":a=Math.max(10,Math.min(80,35+n)),r=Math.max(15,Math.min(75,45+n)),s=Math.floor(Math.random()*10)+2;break;case"RDS":a=Math.max(5,Math.min(60,25+n)),r=Math.max(20,Math.min(70,40+n)),s=Math.floor(Math.random()*20)+5;break;case"ElastiCache":a=Math.max(8,Math.min(50,20+n)),r=Math.max(30,Math.min(80,55+n)),s=Math.floor(Math.random()*50)+10;break;default:a=Math.max(5,Math.min(40,15+n)),r=Math.max(10,Math.min(50,25+n)),s=Math.floor(Math.random()*5)+1}return{cpu:a,memory:r,connections:s,requests:Math.floor(Math.random()*1e3)+100,storage:e.metadata?.allocatedStorage||0,cost:this.calculateEstimatedCost(e),lastUpdated:new Date}}catch(t){return console.error("Error obteniendo m√©tricas:",t),{cpu:0,memory:0,connections:0,requests:0,storage:0,cost:0,lastUpdated:new Date}}}async executeECSAction(e,t,n="n8n-production"){const a={service:"ECS",action:t,target:`${n}/${e}`,timestamp:new Date,status:"completed",result:{message:`ECS ${t.type} action simulated for ${e}`,service:e,cluster:n,action:t.type}};return this.addToHistory(a),console.log(`‚úÖ ECS Action: ${t.type} on ${e}`),a.result}async executeRDSAction(e,t){const n={service:"RDS",action:t,target:e,timestamp:new Date,status:"completed",result:{message:`RDS ${t.type} action simulated for ${e}`,instance:e,action:t.type}};return this.addToHistory(n),console.log(`‚úÖ RDS Action: ${t.type} on ${e}`),n.result}async executeElastiCacheAction(e,t){const n={service:"ElastiCache",action:t,target:e,timestamp:new Date,status:"completed",result:{message:`ElastiCache ${t.type} action simulated for ${e}`,cluster:e,action:t.type}};return this.addToHistory(n),console.log(`‚úÖ ElastiCache Action: ${t.type} on ${e}`),n.result}async executeCloudFrontAction(e,t){const n={service:"CloudFront",action:t,target:e,timestamp:new Date,status:"completed",result:{message:`CloudFront ${t.type} action simulated for ${e}`,distribution:e,action:t.type}};return this.addToHistory(n),console.log(`‚úÖ CloudFront Action: ${t.type} on ${e}`),n.result}async executeS3Action(e,t){const n={service:"S3",action:t,target:e,timestamp:new Date,status:"completed",result:{message:`S3 ${t.type} action logged for ${e}`,bucket:e,action:t.type}};return this.addToHistory(n),console.log(`‚úÖ S3 Action: ${t.type} on ${e}`),n.result}async getECSEnvironmentVariables(e,t="n8n-production"){return{DB_TYPE:"postgresdb",DB_POSTGRESDB_HOST:"n8n-postgres.c9memqg6633m.us-west-2.rds.amazonaws.com",DB_POSTGRESDB_DATABASE:"postgres",DB_POSTGRESDB_USER:"n8nuser",DB_POSTGRESDB_PORT:"5432",DB_POSTGRESDB_SSL:"true",N8N_HOST:"0.0.0.0",N8N_PORT:"5678",N8N_BASIC_AUTH_ACTIVE:"true",N8N_BASIC_AUTH_USER:"admin",AWS_REGION:"us-west-2",VAPI_ALLOWED_IPS:"44.229.228.186,44.238.177.138",GENERIC_TIMEZONE:"America/Mexico_City"}}async updateECSEnvironmentVariables(e,t,n="n8n-production"){const a={service:"ECS",action:{type:"modify",parameters:{environmentVariables:t}},target:`${n}/${e}`,timestamp:new Date,status:"completed",result:{message:"Environment variables updated (simulated)"}};return this.addToHistory(a),console.log("‚úÖ Environment variables update simulated:",t),!0}async getResourceLogs(e,t="runtime",n=50){const a=[],r=new Date;for(let s=0;s<n;s++){const l=new Date(r.getTime()-s*3e4);let i="";if(t==="deployment"){const o=["Starting deployment...","Pulling container image...","Container started successfully","Health check passed","Deployment completed"];i=o[s%o.length]}else{const o=["n8n process running normally","Database connection healthy","Processing workflow execution","API request completed successfully","Health check endpoint responded"];i=o[s%o.length]}a.push({timestamp:l,message:i,logStream:`ecs/n8n/${e.identifier}`,logGroup:`/ecs/${e.clusterName||"n8n-production"}`})}return a}calculateEstimatedCost(e){switch(e.type){case"ECS":return(e.metadata?.desiredCount||1)*.05*24;case"RDS":return .2*24;case"ElastiCache":return .15*24;case"ALB":return .025*24;case"CloudFront":return .01*24;case"S3":return .005*24;default:return 0}}getCommandHistory(){return[...this.commandHistory]}clearCommandHistory(){this.commandHistory=[],this.saveCommandHistory()}async getSystemHealth(){try{const e=await this.discoverAllResources(),t=[...e.ecs,...e.rds,...e.elasticache,...e.loadbalancers,...e.cloudfront,...e.s3],n={},a=[],r=[];for(const o of t){const c=await this.getResourceMetrics(o);n[o.identifier]=c,c.cpu>80&&a.push(`High CPU usage on ${o.name}: ${c.cpu}%`),c.memory>80&&a.push(`High memory usage on ${o.name}: ${c.memory}%`),c.cpu<20&&o.type==="ECS"&&r.push(`Consider reducing ${o.name} capacity - low CPU usage`)}const s=t.filter(o=>o.status==="running").length,l=t.length;let i;return s===l&&a.length===0?i="healthy":s>l/2?i="degraded":i="critical",{overall:i,services:n,alerts:a,recommendations:r}}catch(e){return console.error("Error obteniendo estado del sistema:",e),{overall:"healthy",services:{},alerts:[],recommendations:[]}}}}const y=new u;export{h as S,y as a};
